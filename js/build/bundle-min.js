"use strict";var auth={showLogin:function(){if(!firebase.auth().currentUser){var e=new firebase.auth.OAuthProvider("microsoft.com");firebase.auth().signInWithPopup(e).then(function(e){}).catch(function(e){console.log("error"+e)})}},logout:function(){"true"===localStorage.getItem(config.isloggedin)&&(firebase.auth().signOut(),showHome())}},config={mainView:"#view",isloggedin:"isloggedin"},endpoints={},hr={showCandidates:function(){firebase.database().ref("candidates/").once("value",function(e){var a=e.val();Object.keys(a).map(function(e){if("scheduled"===a[e].status)var t='<div class="col-sm-6 interview_card interview_filter_schd active p-2">\n                    <div class="card">\n                    <div class="card-body">\n                        <h5 class="card-title">'.concat(a[e].name,'</h5>\n                        <p class="card-text">Skills: ').concat(a[e].skills.join(","),'</p>\n                        <p class="card-text text-secondary">Interview at: ').concat(a[e].interviewDate,'</p>\n                        <a href="#" class="btn btn-primary">Selected</a>\n                        <a href="#" class="btn btn-danger">Rejected</a>\n                    </div>\n                    </div>\n                </div>');else if("selected"===a[e].status)t='<div class="col-sm-6 interview_card interview_filter_selected p-2">\n                    <div class="card">\n                        <div class="card-body">\n                            <h5 class="card-title">'.concat(a[e].name,'</h5>\n                            <p class="card-text">Skills: ').concat(a[e].skills.join(","),'</p>\n                            <p class="card-text">Status: <span class="text-success">Selected</span></p>\n                        </div>\n                    </div>\n                </div>');else t='<div class="col-sm-6 interview_card interview_filter_rejected p-2">\n                    <div class="card">\n                        <div class="card-body">\n                            <h5 class="card-title">'.concat(a[e].name,'</h5>\n                            <p class="card-text">Skills: ').concat(a[e].skills.join(","),'</p>\n                            <p class="card-text">Status: <span class="text-danger">Rejected</span></p>\n                        </div>\n                    </div>\n                </div>');$("#interview_candidates").append(t)})})},handleCardShow:function(e){$("#interview_filter").find("a").removeClass("active"),$(".interview_card").removeClass("active"),$("#".concat(e.target.id)).addClass("active"),$(".".concat(e.target.id)).addClass("active")},showAccounts:function(){firebase.database().ref("accounts/").once("value",function(e){var a=e.val();Object.keys(a).map(function(e,t){firebase.database().ref("requirements/".concat(e)).once("value",function(n){var i=n.val(),c=a[e].name;if(null!==i){var s='<div class="col-sm-12 account_card p-2" onclick="hr.selectAccount('.concat(t,')">\n                            <div class="card">\n                                <div class="card-body">\n                                    <h5 class="card-title">').concat(c,'</h5>\n                                    <p class="card-text">Requirement Total: ').concat(i.total,"</p>\n                                </div>\n                            </div>\n                        </div>");if(0==t){var r="<h6>Requirement Details</h6>";i.requirements.map(function(e){r+='<div class="member-container bg-light"><p> '.concat(Object.keys(e)[0]," ").concat(e[Object.keys(e)[0]],"</p></div>")})}}else{s='<div class="col-sm-12 account_card p-2" onclick="hr.selectAccount('.concat(t,')">\n                            <div class="card">\n                                <div class="card-body">\n                                <h5 class="card-title">').concat(c,'</h5>\n                                <p class="card-text">Requirement Total: 0</p>\n                                </div>\n                            </div>\n                        </div>');if(0==t)r="<h6>Requirement Details</h6><div>Currently there is no requirement</div>"}$("#account_list").append(s),$(".account_card:first-child .card").css("background-color","#22a8b8"),0==t&&$(".requirement-list").append(r)})})})},resetAccountContent:function(){$("#account_list").html(""),$(".requirement-list").html("")},selectAccount:function(e){$(".account_card .card").css("background-color","#fff"),$(".account_card:nth-child(".concat(e+1,") .card")).css("background-color","#22a8b8"),$(".requirement-list").html(""),firebase.database().ref("accounts/").once("value",function(a){var t=a.val();Object.keys(t).map(function(a,n){e==n&&firebase.database().ref("requirements/".concat(a)).once("value",function(e){var n=e.val();t[a].name;if(null!==n){var i="<h6>Requirement Details</h6>";n.requirements.map(function(e){i+='<div class="member-container bg-light"><p> '.concat(Object.keys(e)[0]," ").concat(e[Object.keys(e)[0]],"</p></div>")})}else i="<h6>Requirement Details</h6><div>Currently there is no requirement</div>";$(".requirement-list").append(i)})})})}},firebaseConfig={apiKey:"AIzaSyDL-vEobMb_AeJ6NcEwqWzops9I9C0pR0w",authDomain:"hrforecastsystem.firebaseapp.com",databaseURL:"https://hrforecastsystem.firebaseio.com",projectId:"hrforecastsystem",storageBucket:"",messagingSenderId:"645473796645",appId:"1:645473796645:web:a3539d18ce83b3a73735cc",measurementId:"G-Y7RKP3CTBQ"};function handleShowLogin(){auth.showLogin()}function handleShowRegister(){auth.showRegister()}function showDashboard(){try{var e=firebase.auth().currentUser.email.split("@")[0];firebase.database().ref("/employees/"+e).once("value").then(function(e){"HR"==e.val().designation?showHrDashboard():"PM"==e.val().designation&&showPmDashboard(),$("header").show()})}catch(e){showHome()}}function showHrDashboard(){$("#view").load("../views/hr/landing.html"),$("header").show(),hr.showCandidates()}function showPmDashboard(){$("#view").load("../views/pm/landing.html"),$("header").show(),pm.showTeamMemeber()}function showHome(){$("#view").load("../views/home.html"),$("header").hide()}function handleUrl(e){var a=getUrlParams(e);if(0==Object.keys(a).length){var t=e.split("/").pop();urlRedirect[t]}else urlRedirect[a.mode](a.oobCode)}function getUrlParams(e){var a={};e.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(e,t,n){a[t]=n});return a}function showInterviews(){firebase.database().ref("/employees/"+userId).once("value").then(function(e){$("#interviewsContainer").load("../views/hr/interviews.html")})}firebase.initializeApp(firebaseConfig),firebase.auth().onAuthStateChanged(function(e){e?("publicisgroupe.net"==!e.email.split("@")[1]&&auth.logout(),$("#login").hide(),$("#myprofile, #logout").show(),localStorage.setItem(config.isloggedin,"true"),$("#myprofile button").text(e.displayName),showDashboard()):($("#login").show(),$("#myprofile, #logout").hide(),localStorage.setItem(config.isloggedin,"false"))}),window.onload=function(){handleUrl(location.href);try{firebase.auth().currentUser;showDashboard()}catch(e){showHome()}};var urlRedirect={login:auth.showLogin,dashboard:showDashboard,home:showHome};function _defineProperty(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}var pm={addRequirement:function(){var e=$("#addrequirement_skills").val(),a=parseInt($("#addrequirement_nor").val()),t='<div class="member-container bg-light"><p> '.concat(e," ").concat(a,"</p></div>");$("#team_requirements").append(t),this.getTeamName().then(function(t){firebase.database().ref("requirements/".concat(t.val().project,"/")).once("value",function(n){var i=n.val();i.total=i.total+a,i.requirements.push(_defineProperty({},e,a)),firebase.database().ref("requirements/".concat(t.val().project)).set(i),$("#req_total").text(" Total requirements: ".concat(i.total)),$("#addrequirement .close").trigger("click")})})},getTeamName:function(){return firebase.database().ref("employees/".concat(firebase.auth().currentUser.email.split("@")[0])).once("value",function(e){return e.exists()?e.val():null})},showTeamMemeber:function(){this.getTeamName().then(function(e){firebase.database().ref("accounts/".concat(e.val().project,"/members")).once("value",function(e){var a=e.val();Object.keys(a).map(function(e,t){var n='<div class="member-container card"><p class="name">'.concat(a[e],"</p></div>");$("#members").append(n)})}),firebase.database().ref("requirements/".concat(e.val().project,"/")).once("value",function(e){var a=e.val();a.requirements.length&&($("#team_requirements").append('<h4 class="team-members-title">Requirements</h4>'),$("#team_requirements").append('<div id="req_total" class="alert alert-primary" role="alert">\n                    Total requirements: '.concat(a.total,"\n                  </div>")),a.requirements.map(function(e){var a='<div class="member-container bg-light"><p> '.concat(Object.keys(e)[0]," ").concat(e[Object.keys(e)[0]],"</p></div>");$("#team_requirements").append(a)}))})})}};